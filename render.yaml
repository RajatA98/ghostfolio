# Render Blueprint: AgentForge (Ghostfolio) â€” one-click deploy
# Dashboard: New > Blueprint > connect this repo > Deploy Blueprint
# After first deploy, set ROOT_URL to your service URL (e.g. https://agentforge.onrender.com)

services:
  - type: web
    runtime: docker
    name: agentforge
    dockerfilePath: ./Dockerfile
    healthCheckPath: /api/v1/health
    envVars:
      - key: DATABASE_URL
        fromDatabase:
          name: agentforge-db
          property: connectionString
      - key: REDIS_HOST
        fromService:
          type: keyvalue
          name: agentforge-redis
          property: host
      - key: REDIS_PORT
        fromService:
          type: keyvalue
          name: agentforge-redis
          property: port
      - key: REDIS_PASSWORD
        sync: false
        # Leave blank if Render Key Value has no auth; set in Dashboard if required
      - key: JWT_SECRET_KEY
        generateValue: true
      - key: ACCESS_TOKEN_SALT
        generateValue: true
      - key: ROOT_URL
        sync: false
        # Set to your public URL after first deploy (e.g. https://agentforge.onrender.com)

  - type: keyvalue
    name: agentforge-redis
    plan: free
    ipAllowList:
      - source: 0.0.0.0/0
        description: everywhere

databases:
  - name: agentforge-db
    plan: free
